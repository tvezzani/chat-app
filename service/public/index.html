<!DOCTYPE html>
<html>
<head>
  <title>Simple Chat</title>
</head>
<body>
  <h2>Join Chat Room</h2>
  <input id="room" placeholder="Room name">
  <input id="username" placeholder="Your name">
  <button id="joinBtn">Join</button>

  <div id="chat" style="display:none;">
    <div id="messages"></div>
    <input id="msg" placeholder="Type a message...">
    <button id="sendBtn">Send</button>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    let room;

    document.getElementById("joinBtn").onclick = () => {
      room = document.getElementById("room").value;
      const username = document.getElementById("username").value;
      socket.emit("join-room", room, username);
      document.getElementById("chat").style.display = "block";
    };

    document.getElementById("sendBtn").onclick = () => {
      const msg = document.getElementById("msg").value;
      socket.emit("send-message", room, msg);
      document.getElementById("msg").value = "";
    };

    socket.on("chat-message", (msg) => {
      const div = document.createElement("div");
      div.innerText = msg;
      document.getElementById("messages").appendChild(div);
    });
  </script>
</body>
</html>

